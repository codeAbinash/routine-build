import{R as k,r as d,j as e,g as D,d as O,E as T,u as A,i as w,a as R,l as I}from"./index.js";function C({updateRoutine:u}){const[l,t]=k.useState(""),[i,a]=k.useState("");return d.useEffect(()=>{u({time:[l,i]})},[l,i]),e.jsx("div",{className:"dailyMakeRoutine",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"top flex items-center gap-3",children:[e.jsx("p",{className:"w-[50%] text-xs text-secondary pl-1 pb-1 mt-2",children:"Start Time"}),e.jsx("p",{className:"w-[50%] text-xs text-secondary pl-1 pb-1 mt-2",children:"End Time"})]}),e.jsxs("div",{className:"bottom items-center flex gap-3",children:[e.jsx("input",{type:"time",onInput:o=>t(o.target.value),className:"input-time-small input-text bg-inputBg dark:bg-darkInputBg tap rounded-xl"}),e.jsx("input",{type:"time",onInput:o=>a(o.target.value),className:"input-time-small input-text bg-inputBg dark:bg-darkInputBg tap rounded-xl"})]})]})})}function M({updateRoutine:u}){const l=new Date;l.setDate(l.getDate()+1);const[t,i]=d.useState(D(l)),[a,o]=d.useState(),m=d.useRef(),p=d.useRef();d.useEffect(()=>{u({time:[t,a]})},[t,a]);function c(n){a||o(n.target.value)}return e.jsx("div",{children:e.jsxs("div",{className:"inputTime mt-2 flex flex-col gap-2 w-full",children:[e.jsxs("div",{className:"bottom flex-1",children:[e.jsx("p",{className:"text-xs text-secondary pl-1 pb-1",children:"Start date and time"}),e.jsx("input",{ref:m,defaultValue:t,onInput:n=>{i(n.target.value),c(n)},type:"datetime-local",className:"input-text bg-inputBg dark:bg-darkInputBg appearance-none tap-99"})]}),e.jsxs("div",{className:"bottom flex-1",children:[e.jsx("p",{className:"text-xs text-secondary pl-1 pb-1",children:"End date and time"}),e.jsx("input",{ref:p,defaultValue:a,onInput:n=>o(n.target.value),type:"datetime-local",className:"input-text bg-inputBg dark:bg-darkInputBg appearance-none tap-99"})]})]})})}const q=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function $(u,l){let t=[null,null];for(let i=0;i<7;i++)u[i]&&(l[i][0]&&(t[0]=l[i][0]),l[i][1]&&(t[1]=l[i][1]));return t}function V({routine:u,updateRoutine:l}){const[t,i]=d.useState([!1,!0,!1,!0,!1,!0,!1]),[a,o]=d.useState([[null,null],[null,null],[null,null],[null,null],[null,null],[null,null],[null,null]]),m={};function p(){console.log(u);const[c,n]=$(t,a);console.log(c,n);for(let s=0;s<7;s++)t[s]?m[s]=a[s]:delete m[s],t[s]&&!a[s][0]&&!a[s][1]&&c&&n&&(m[s]=[c,n],a[s]=[c,n]);o([...a]),l({...u,time:m})}return e.jsxs("div",{className:"weeklyMakeRoutine mb-5",children:[e.jsxs("div",{className:"top flex items-center gap-1",children:[e.jsx("p",{className:"w-1/3 text-xs text-secondary pl-1 pb-1 mt-2 text-center",children:"Routine Dates"}),e.jsx("p",{className:"w-1/3 text-xs text-secondary pl-1 pb-1 mt-2 text-center",children:"Start Time"}),e.jsx("p",{className:"w-1/3 text-xs text-secondary pl-1 pb-1 mt-2 text-center",children:"End Time"})]}),e.jsx("div",{className:"flex flex-col gap-3 mt-2",children:q.map((c,n)=>e.jsxs("div",{className:"flex flex-row gap-3",children:[e.jsx("div",{className:`tap97 dayName check ${t[n]?"checkDiv active shadow-lg shadow-accent/50":"bg-inputBg dark:bg-darkInputBg"} px-4 py-3 rounded-xl flex-1 items-center justify-center`,onClick:()=>{O(()=>{t[n]=!t[n],p(),i([...t])})},children:e.jsx("p",{className:"text-center",children:c})}),e.jsxs("div",{className:`timeInput flex gap-3 flex-[3] ${t[n]?"":"opacity-40"} trans-opacity`,children:[e.jsx("input",{type:"time",className:"trans-opacity input-time-small bg-inputBg dark:bg-darkInputBg tap rounded-xl",disabled:!t[n],value:a[n][0]||"",onInput:s=>{a[n][0]=s.target.value,p()}}),e.jsx("input",{type:"time",value:a[n][1]||"",className:"trans-opacity input-time-small bg-inputBg dark:bg-darkInputBg tap rounded-xl",disabled:!t[n],onInput:s=>{a[n][1]=s.target.value,p()}})]})]},n))}),e.jsxs("p",{className:"text-xs text-center mt-5 text-secondary",children:["If it is an event, which is not in a range of time, specify only the ",e.jsx("span",{className:"test-medium",children:"Start Time"})," "]})]})}function H(){const u=new T;let l=["📕","🧑🏻‍💻","🏃🏻‍♂️","🎨","👻"];const[t,i]=d.useState(""),[a,o]=d.useState(""),[m,p]=d.useState(""),[c,n]=d.useState("weekly"),[s,N]=d.useState({}),v=A();function B(){setTimeout(()=>{v(-1)},50)}return d.useEffect(()=>{console.log(s)}),e.jsxs("div",{className:"new-routine-screen screen dark:text-darkText select-none",children:[e.jsxs("header",{className:"flex p-2 w-full justify-between select-none items-center px-4",children:[e.jsx("div",{className:"left tap",onClick:B,children:e.jsx("img",{src:w.xmark_solid,className:"w-10 p-3 dark:invert dark:grayscale"})}),e.jsx("div",{className:"center font-medium text-base",children:"New Routine "}),e.jsx("div",{className:"right tap",onClick:y,children:e.jsx("img",{src:w.check_solid,className:"w-11 p-3 dark:invert dark:grayscale"})})]}),e.jsx("section",{className:"basic-details w-full p-4 pt-2",children:e.jsxs("div",{className:"min-h-[calc(100vh-100px)] flex flex-col justify-between items-center w-full",children:[e.jsxs("div",{className:"top flex flex-col gap-3 w-full",children:[e.jsxs("div",{className:"",children:[e.jsx("p",{className:"text-xs text-secondary pl-1 pb-1",children:"Routine name"}),e.jsxs("div",{className:"inputText flex flex-row gap-3",children:[e.jsx("img",{src:T.get(W(m)[0]),className:"tap h-[3.6rem] p-[0.8rem] bg-inputBg dark:bg-darkInputBg rounded-2xl"}),e.jsx("input",{value:t,onInput:r=>{i(r.target.value)},type:"text",placeholder:"Routine Name",className:"name input-text bg-inputBg dark:bg-darkInputBg"})]})]}),e.jsx("div",{className:"inputText",children:e.jsxs("div",{className:"",children:[e.jsx("p",{className:"text-xs text-secondary pl-1 pb-1",children:"Routine description"}),e.jsx("input",{value:a,onInput:r=>{o(r.target.value)},type:"text",placeholder:"Routine Description",className:"name input-text bg-inputBg dark:bg-darkInputBg"})]})}),e.jsxs("div",{className:"",children:[e.jsx("p",{className:"text-xs text-secondary pl-1 pb-1",children:"Routine emoji and repetition"}),e.jsxs("div",{className:"inputSelect flex justify-between items-center gap-3",children:[e.jsx("input",{type:"text",value:m,placeholder:"Custom Emoji",className:"name input-text bg-inputBg dark:bg-darkInputBg",onInput:r=>{p(r.target.value)}}),e.jsxs("select",{defaultValue:c,onInput:r=>n(r.target.value),className:"appearance-none p-[1rem] px-7 rounded-2xl trans-outline outline-none focus:outline-accent border-none bg-inputBg dark:bg-darkInputBg text-center",children:[e.jsx("option",{value:"once",children:"Repeat : Once"}),e.jsx("option",{value:"daily",children:"Repeat : Daily"}),e.jsx("option",{value:"weekly",children:"Repeat : Weekly"}),e.jsx("option",{value:"monthly",children:"Repeat : Monthly"}),e.jsx("option",{value:"yearly",children:"Repeat : Yearly"}),e.jsx("option",{value:"calendar",children:"Calendar Event"})]})]})]}),e.jsx("div",{className:"emojis flex gap-3 rounded-2xl flex-wrap justify-between items-center",children:l.map((r,j)=>e.jsx("img",{src:u.get(r),onClick:()=>p(r),className:"tap bg-inputBg dark:bg-darkInputBg h-[3.2rem] p-[0.8rem] rounded-2xl"},j))}),E(c)]}),e.jsx("div",{className:"btn w-full",children:e.jsx("button",{className:"btn-full no-highlight tap99 w-full text-sm",onClick:y,children:"Add this Routine"})})]})})]});function y(){if(i(t.trim()),o(a.trim()),!t)return alert("Routine name is required");if(c==="once"){if(!s.time[0])return alert("Routine time is required");let g=new Date(s.time[0]),h=new Date(s.time[1]);if(g>h)return alert("Start time should be less than end time");g.getTime()===h.getTime()&&(s.time[1]="")}if(c==="daily"){if(!s.time[0])return alert("Routine time is required");if(S(s.time[0],s.time[1]))return alert("Start time should be less than end time");s.time[1]=""}if(c==="weekly"){let g=s.time;if(!g||g&&Object.keys(g).length===0)return alert("At least one Routine time is required");const h={};let b=!1;for(let f=0;f<7;f++){const x=g[f];if(x){if(x[0]){if(h[f]=[],h[f][0]=x[0],b=!0,x[1]&&x[0]!==x[1]){if(S(x[0],x[1]))return alert(`There is wrong data in the time of ${R[f]}. The start time should be less than end time`);h[f][1]=x[1]}}else if(x[1])return alert(`There is wrong data in the time of ${R[f]}. The start time must be provided if end time is provided`)}}if(!b)return alert("At least one day should be selected");s.time=h}let r={name:t,description:a,emoji:m||"🧑🏻",type:c,...s};console.log(r);let j=JSON.parse(I.get("routines")||"[]");j.push(r),I.set("routines",JSON.stringify(j)),v(-1)}function E(r){return r==="once"?e.jsx(M,{updateRoutine:N}):r==="weekly"?e.jsx(V,{updateRoutine:N,routine:s}):r==="daily"?e.jsx(C,{updateRoutine:N}):e.jsx("div",{className:"mt-16 text-center",children:e.jsx("p",{children:"This screen is under development"})})}}function S(u,l){let t=u.split(":"),i=l.split(":"),a=parseInt(t[0]),o=parseInt(t[1]),m=parseInt(i[0]),p=parseInt(i[1]);return a>m||a===m&&o>p}function W(u){return u?[...new Intl.Segmenter().segment(u)].map(t=>t.segment):["🧑🏻"]}export{H as default};
